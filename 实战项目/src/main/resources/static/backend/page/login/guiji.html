<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>轨迹回放</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"/>
    <style>
        html, body, #container {
            height: 100%;
            width: 100%;
        }

        .input-card .btn{
            margin-right: 1.2rem;
            width: 9rem;
        }

        .input-card .btn:last-child{
            margin-right: 0;
        }
    </style>
</head>
<body>
<div id="container"></div>

<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=自己的key"></script>
<script>
    var i = 0;
    //var arr = [[116.478935,39.997761],[116.478939,39.997825],[116.478912,39.998549],[116.478912,39.998549],[116.478998,39.998555],[116.478998,39.998555],[116.479282,39.99856],[116.479658,39.998528],[116.480151,39.998453],[116.480784,39.998302],[116.480784,39.998302],[116.481149,39.998184],[116.481573,39.997997],[116.481863,39.997846],[116.482072,39.997718],[116.482362,39.997718],[116.483633,39.998935],[116.48367,39.998968],[116.484648,39.999861]];
   var arr =  [[113.550087,34.827019],[113.55135,34.827008],[113.551404,34.826912],[113.551409,34.82666],[113.55142,34.825994],[113.551415,34.824803],[113.551431,34.823671],[113.551431,34.8235],[113.551441,34.823296],[113.551441,34.823087],[113.551441,34.822105],[113.551447,34.821392],[113.551452,34.820775],[113.551452,34.820705],[113.551452,34.820201],[113.551458,34.819407],[113.551404,34.826912],[113.551409,34.82666],[113.55142,34.825994],[113.55142,34.825994],[113.551415,34.824803],[113.551415,34.824803],[113.551431,34.823671],[113.551431,34.823671],[113.551431,34.8235],[113.551431,34.8235],[113.551441,34.823296],[113.551441,34.823296],[113.551441,34.823087],[113.551441,34.823087],[113.551441,34.822105],[113.551441,34.822105],[113.551447,34.821392],[113.551447,34.821392],[113.551452,34.820775],[113.551452,34.820775],[113.551452,34.820705],[113.551452,34.820705],[113.551452,34.820201],[113.551452,34.820201],[113.551458,34.819407],[113.551452,34.819359],[113.553335,34.819369],[113.554145,34.819375],[113.554177,34.819375],[113.554445,34.819375],[113.554657,34.81937],[113.551452,34.819359],[113.553335,34.819369],[113.553335,34.819369],[113.554145,34.819375],[113.554177,34.819375],[113.554177,34.819375],[113.554445,34.819375],[113.554445,34.819375],[113.554657,34.81937]];

    var marker, lineArr = [[113.550087,34.827019]];
        console.log(lineArr);

    var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [113.550087,34.827019],
        zoom: 17
    });

    marker = new AMap.Marker({
        map: map,
        position: [113.550087,34.827019],
        //icon: "https://webapi.amap.com/images/car.png",
        icon:new AMap.Icon({image: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjU5NjEwNzI5OTU2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTY0IiBoZWlnaHQ9IjE2NCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj5AZm9udC1mYWNlIHsgZm9udC1mYW1pbHk6IGZlZWRiYWNrLWljb25mb250OyBzcmM6IHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUud29mZjI/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ3b2ZmMiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmY/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ3b2ZmIiksIHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUudHRmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgidHJ1ZXR5cGUiKTsgfQo8L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNjE1LjQyNCA3NTUuNTg0YTE0Ljg0OCAxNC44NDggMCAwIDEtMTQuOTEyIDE0Ljg0OGgtNTMxLjJhMTQuOTEyIDE0LjkxMiAwIDAgMS0xNC45MTItMTQuODQ4VjE2Ni4zMzZjMC04LjE5MiA2LjcyLTE0Ljg0OCAxNC45MTItMTQuODQ4aDUzMS4yYzguMzIgMCAxNC45MTIgNi42NTYgMTQuOTEyIDE0Ljg0OHY1ODkuMjQ4eiIgZmlsbD0iIzQzQUE5OSIgcC1pZD0iMjk4MyI+PC9wYXRoPjxwYXRoIGQ9Ik01NC4zMzYgMzY0LjkyOGg1NjEuMDg4djE3Ni4yNTZINTQuMzM2eiIgZmlsbD0iIzg0QzVCRCIgcC1pZD0iMjk4NCI+PC9wYXRoPjxwYXRoIGQ9Ik05NzkuMDcyIDUyOS42NjR2MjMxLjY4YzAgOC4zMi02LjcyIDE0Ljg0OC0xNC45MTIgMTQuODQ4SDYzNi43MzZhMTQuODQ4IDE0Ljg0OCAwIDAgMS0xNC44NDgtMTQuODQ4VjMyMS4xNTJjMC04LjI1NiA2LjY1Ni0xNC45MTIgMTQuODQ4LTE0LjkxMkg5MDIuNCIgZmlsbD0iI0UxQjAzMCIgcC1pZD0iMjk4NSI+PC9wYXRoPjxwYXRoIGQ9Ik05NDQuODk2IDU0MS4yNDh2LTkuMzQ0bC02MS44MjQtMTgwLjczNmgtMTQwLjQ4YTEyLjAzMiAxMi4wMzIgMCAwIDAtMTIuMDMyIDEyLjAzMnYxNzguMDQ4aDIxNC4zMzZ6IiBmaWxsPSIjNzQ1NDQ4IiBwLWlkPSIyOTg2Ij48L3BhdGg+PHBhdGggZD0iTTI3OS4xNjggNzcwLjQzMm0tOTUuODA4IDBhOTUuODA4IDk1LjgwOCAwIDEgMCAxOTEuNjE2IDAgOTUuODA4IDk1LjgwOCAwIDEgMC0xOTEuNjE2IDBaIiBmaWxsPSIjQjhBNkExIiBwLWlkPSIyOTg3Ij48L3BhdGg+PHBhdGggZD0iTTI3OS4xNjggODg1LjgyNGMtNjMuNjE2IDAtMTE1LjM5Mi01MS44NC0xMTUuMzkyLTExNS4zOTIgMC02My42OCA1MS43NzYtMTE1LjQ1NiAxMTUuMzkyLTExNS40NTZzMTE1LjQ1NiA1MS43NzYgMTE1LjQ1NiAxMTUuNDU2YzAgNjMuNTUyLTUxLjg0IDExNS4zOTItMTE1LjQ1NiAxMTUuMzkyeiBtMC0xOTEuNDI0YTc2LjE2IDc2LjE2IDAgMCAwLTc2LjA5NiA3Ni4wMzIgNzYuMDk2IDc2LjA5NiAwIDEgMCA3Ni4wOTYtNzYuMDMyeiIgZmlsbD0iIzQ0NTQ0QSIgcC1pZD0iMjk4OCI+PC9wYXRoPjxwYXRoIGQ9Ik04MDAuNTEyIDc3MC40MzJtLTk1LjgwOCAwYTk1LjgwOCA5NS44MDggMCAxIDAgMTkxLjYxNiAwIDk1LjgwOCA5NS44MDggMCAxIDAtMTkxLjYxNiAwWiIgZmlsbD0iI0I4QTZBMSIgcC1pZD0iMjk4OSI+PC9wYXRoPjxwYXRoIGQ9Ik04MDAuNTEyIDg4NS44MjRjLTYzLjYxNiAwLTExNS40NTYtNTEuODQtMTE1LjQ1Ni0xMTUuMzkyIDAtNjMuNjggNTEuODQtMTE1LjQ1NiAxMTUuNDU2LTExNS40NTZzMTE1LjM5MiA1MS43NzYgMTE1LjM5MiAxMTUuNDU2YzAgNjMuNTUyLTUxLjc3NiAxMTUuMzkyLTExNS4zOTIgMTE1LjM5MnogbTAtMTkxLjQyNGE3Ni4wOTYgNzYuMDk2IDAgMSAwIDAgMTUyLjE5MiA3Ni4wOTYgNzYuMDk2IDAgMCAwIDAtMTUyLjE5MnoiIGZpbGw9IiM0NDU0NEEiIHAtaWQ9IjI5OTAiPjwvcGF0aD48L3N2Zz4=',  // Icon的图像

            size:new AMap.Size(50, 50),//设置icon的大小
            imageSize: new AMap.Size(36,36)}),
        offset: new AMap.Pixel(-26, -13),
        autoRotation: true,
        angle:-90,
    });

    // 绘制轨迹
    var polyline = new AMap.Polyline({
        map: map,
        path: lineArr,
        showDir:true,
        strokeColor: "#28F",  //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6,      //线宽
        // strokeStyle: "solid"  //线样式
    });

    var passedPolyline = new AMap.Polyline({
        map: map,
        // path: lineArr,
        strokeColor: "#AF5",  //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6,      //线宽
        // strokeStyle: "solid"  //线样式
    });


    marker.on('moving', function (e) {
        passedPolyline.setPath(e.passedPath);
    });

    map.setFitView();
    var interval = setInterval("getPoint()",1000);

    function getPoint(){
        if(i> arr.length-2)return;
        var line = [];
        line.push(arr[i]);

        i ++;
        line.push(arr[i]);
        console.log(line);
        // lineArr.push(arr[i]);
        // 绘制轨迹
    var polyline = new AMap.Polyline({
        map: map,
        path: line,
        showDir:true,
        strokeColor: "#28F",  //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6,      //线宽
        // strokeStyle: "solid"  //线样式
    });
    // var interval = setInterval("getPoint()",5000);
        marker.moveAlong(line,200);

    // setInterval(getPoint(),5000);

    }

</script>
</body>
</html>
